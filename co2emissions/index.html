<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <title>CO2 Emissions</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <style>
        @import "https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css";
        #container {
            height: 555px;
            min-width: 310px;
            max-width: 800px;
            margin: 0 auto;
        }
        #play-controls {
            text-align: center;
            min-width: 310px;
            max-width: 800px;
            margin: 0 auto;
            padding: 5px 0 1em 0;
        }
        #play-controls * {
            display: inline-block;
            vertical-align: middle;
        }
        #play-pause-button {
            width: 30px;
            height: 30px;
            text-align: center;
            font-size: 15px;
            cursor: pointer;
            border: 1px solid silver;
            border-radius: 3px;
            background: #f8f8f8;
        }
        #play-range {
            margin: 2.5%;
            width: 70%;
        }
        #play-output {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 60px;
            color: gray;
        }
        .source {
            text-align:center;
            font-family: Arial, Helvetica, sans-serif;
            width: 100%;
            margin: 0 auto;
        }
        .highcharts-legend {
            display: none;
        }
    </style>

  </head>
  <body>
      <div id="container"></div>
      <div id="play-controls">
          <button id="play-pause-button" class="fa fa-play" title="play"></button>
          <input id="play-range" type="range" value="0" min="0" max="20" />
          <output id="play-output" for="play-range" name="year">1994</output>
      </div>
      <p class="source"><b>Source:</b> https://data.worldbank.org/</p>

      <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
      <script src="https://code.highcharts.com/highcharts.js"></script>
      <script src="https://code.highcharts.com/modules/exporting.js"></script>

      <script>
          $(function () {
              var chart,
                  dataSequence = [
                      {
                          name: '1994',
                          data: [0.288119068,15.57658628,7.189264701,11.1051094,1.518847687,15.75307185,2.565993892,12.16751705,11.7169489,1.396376664,11.24602792,5.699231509,10.62839192,7.553975062,0.80872395,3.650796342,7.16667249,9.389452085,34.13762741,1.114949897,10.74723845,7.370467403,7.818332417,8.664998584,4.770042511,59.60743609,16.90754625,5.901638793,6.251746293,5.90858368,31.87389257,9.448399895,19.36089205]
                      }, {
                          name: '1995',
                          data: [0.787032547,15.59651881,7.521516107,11.08115205,1.594541722,15.95907715,2.755754966,11.99069327,10.92454083,1.535651744,10.32014335,5.864118291,10.57946663,7.280037238,0.841937014,3.689869364,7.573033273,9.434444176,34.13762741,1.125193736,11.55535084,7.386109054,7.67101664,8.918615723,5.173429531,61.91395133,12.61675682,6.082242269,6.248524772,5.571316975,29.24987806,9.274846236,19.27654526]
                      },
                      {
                          name: '1996',
                          data: [0.726233461,16.50180039,7.938008299,11.62383425,1.729996821,16.1910295,2.844309582,12.15467452,13.71465193,1.604213754,11.95863616,6.280953607,10.8602336,8.222645733,0.898163092,3.344098873,7.48906561,9.579507892,30.82849876,1.139196953,11.96659804,7.674956324,7.615492854,9.210609908,5.026484644,61.81247811,13.59425035,5.848744212,6.324031405,5.640102519,16.17068196,9.480231059,19.49602474]
                      },
                      {
                          name: '1997',
                          data: [0.496361245,16.51427321,7.863667996,11.32885202,1.797434636,16.56173401,2.820567891,12.36529136,11.64768852,1.667412297,11.66057821,5.862811599,10.5111126,7.763336874,0.916859884,3.186111627,7.566965198,9.525758078,32.11253695,1.148011367,11.42242905,8.204273662,8.195307227,9.043385427,5.250035785,70.042227,11.1422549,6.292802734,5.89509852,5.849483122,15.58984481,9.042720853,19.69036318]
                      },
                      {
                          name: '1998',
                          data: [0.47581516,16.93569585,7.981004261,11.60191455,1.839317927,16.79757271,2.67674598,11.90396015,11.22730415,1.846565185,11.05828449,6.271267469,10.42527316,7.667265104,0.918329424,3.272626014,7.734648761,9.160044153,28.258697,1.139739384,11.36038153,7.871314024,8.52482024,8.417027479,5.690597799,58.74518549,10.49776847,6.5022035,5.985459792,5.865651918,28.96879086,9.094403914,19.5792362]
                      },
                      {
                          name: '1999',
                          data: [0.577082914,17.19029769,7.741130615,11.17302675,1.85802905,16.95288535,2.648649247,10.88847106,10.36266364,1.857246054,10.7295164,6.098157837,10.01775877,7.456127132,0.959258891,3.170059693,7.765755082,9.448842945,27.68049165,1.165094147,10.98308161,8.510851608,9.117546218,8.166558532,6.305207232,55.05426923,11.21389236,6.991264687,5.769666514,5.696073665,26.42410404,9.047636069,19.72716951]
                      },{
                          name: '2000',
                          data: [0.581961496,17.20060983,7.774259739,11.2296677,1.876441307,17.41463895,2.696862433,12.07688904,9.613175554,2.053217709,10.12847414,5.946665463,10.09563988,7.693782116,0.976601686,3.083093518,7.912673166,9.622351624,26.18923263,1.177518232,10.89472628,8.549394199,8.834015703,7.822798329,6.096403385,58.61946468,14.36980164,7.257824346,5.562430083,5.435484985,35.91576427,9.199549233,20.17875051]
                      },{
                          name: '2001',
                          data: [0.574316054,16.73336743,8.192769898,11.13371551,1.90429564,17.01842806,2.742120813,12.10978725,9.875092348,1.78826769,10.9967421,6.153060599,10.3662867,7.373427894,0.968514319,3.525341062,7.904432663,9.464308709,27.40553716,1.294879753,11.01778766,8.87715449,9.284992238,7.877112224,6.056037979,67.31049638,14.01778217,7.290748328,5.747026066,5.93984844,30.70638223,9.233174987,19.63650507]
                      },{
                          name: '2002',
                          data: [0.722958875,17.37045177,8.299115796,10.3854951,1.850682075,16.56039221,3.007083197,11.7437029,9.68193193,1.779303147,11.86067583,6.068664472,10.0586725,7.550227286,0.964275366,3.499928425,7.932323042,9.573130135,27.24771864,1.29874199,11.24924012,8.408514119,8.378534776,7.712040984,6.410086691,63.82809721,14.96915013,7.591280782,6.434228598,5.586512817,24.34879643,8.904123108,19.61340408]
                      },{
                          name: '2003',
                          data: [0.500225396,16.90195895,8.889562334,10.88211417,1.769005571,17.47884132,3.524074093,11.97368903,10.38827349,2.031736645,13.26109694,6.115998108,9.969354525,7.485457013,0.989271008,3.553105717,8.17175128,9.725282059,27.72100585,1.261163325,11.22973834,8.46272795,9.90643602,7.911421984,5.853135645,60.90080934,14.57351967,7.611166445,6.115194532,5.474267138,28.78331607,9.053277839,19.56410453]
                      },{
                          name: '2004',
                          data: [1.001878117,17.02651535,8.858363703,10.66129022,1.835946431,17.28827609,4.037990651,11.4518445,9.362701019,2.034616425,12.83267498,6.120078568,9.898682369,7.683682902,1.021862866,4.33551491,8.216487201,9.909203497,28.8728348,1.438174638,11.352269,8.453612477,9.287466436,7.97271581,6.02313785,57.00557389,17.11147523,7.908050681,6.062241404,5.46256894,27.83302905,8.989140127,19.65837118]
                      },{
                          name: '2005',
                          data: [0.985736355,17.16971145,9.020169598,10.35539299,1.865977058,17.28759686,4.523178064,11.76245004,8.690076931,2.213982578,10.41643805,6.099598855,9.666372234,7.513584557,1.06531244,4.216692239,8.166090128,9.698882518,31.51568145,1.502894463,11.12017757,8.258489562,9.179216926,7.927026686,6.215165476,58.88108378,16.69630041,8.097058048,5.710313512,5.558350382,25.3144861,8.982938536,19.59188523]
                      },{
                          name: '2006',
                          data: [1.105019027,17.65139831,8.727297872,10.151039,1.847654542,16.69635141,4.980314197,11.92582928,10.11291416,2.323117698,12.57063845,5.906266386,9.911476012,7.568614994,1.118603899,3.59844793,8.072145596,9.632048618,31.07802552,1.539548743,10.98971528,7.992808632,9.495835691,8.362097463,5.684705076,62.06618488,17.66403491,7.88419571,5.459003216,5.592175318,23.37186043,8.89871022,19.09406652]
                      },{
                          name: '2007',
                          data: [1.203134,17.86526004,8.406418936,9.744777191,1.910334175,16.85532052,5.334909929,11.97251522,9.20201511,2.417069964,12.09848186,5.76638535,9.488039888,7.414833454,1.189651807,2.22690329,7.917347216,9.782963899,30.0460336,1.613007427,10.78586295,7.963774563,9.57484966,8.244183742,5.705207852,51.93367224,15.39742391,7.920890716,5.253521937,5.03057402,21.98593349,8.617163681,19.21789784]
                      },{
                          name: '2008',
                          data: [1.185000494,18.16087566,8.295095978,9.751984809,2.018593476,16.8745152,5.701915025,11.23377283,8.543351098,2.493673565,10.63715919,5.690501857,9.506321178,6.677481144,1.306253903,3.281546097,7.60176497,9.449533972,31.14868474,1.677409361,10.76402402,8.029041035,11.67958325,8.258160054,5.268402206,45.13478159,16.61645475,7.165531607,5.328098275,5.283044324,22.19548989,8.424423983,18.46176387]
                      },{
                          name: '2009',
                          data: [1.234425074,18.20018196,7.518751102,9.249615685,1.893620024,15.96140637,6.010102433,10.30832179,8.058895601,2.548036898,9.955194272,5.438357063,8.818595562,6.447492771,1.427780473,3.608379714,6.795651486,8.620816388,30.94737447,1.643708259,10.42752306,7.527296054,11.46182886,7.800914342,5.126323978,41.82722076,17.61021255,6.216973378,4.63141136,5.377973641,21.21405954,7.574622131,17.15773779]
                      },{
                          name: '2010',
                          data: [1.244091538,17.74084505,8.071131802,10.17146522,2.144736395,15.72334502,6.560520007,10.65257862,8.40721667,2.449400701,11.57528165,5.428980862,9.279634012,6.168528586,1.393273291,3.772295829,6.83837457,9.148316038,29.95609021,1.730134712,11.01707086,7.305005861,12.2934545,8.313376825,4.552752646,39.05970823,18.90824847,5.816416366,5.547348052,4.983428945,18.80851973,7.857836486,17.44286171]
                      },{
                          name: '2011',
                          data: [1.252680841,17.53887776,7.748134305,9.054330011,2.224711944,15.64133183,7.241515419,10.18548225,7.296383208,2.569091847,10.54447474,5.077911102,9.12485921,5.896828979,1.473080878,4.373742453,6.702557614,9.317426666,28.73354924,1.759680341,10.4335386,7.185948221,9.124767216,8.328175875,4.510827218,39.50920515,17.68372988,5.788018458,5.474957121,4.672038363,18.49161681,7.079297626,16.97695728]
                      },{
                          name: '2012',
                          data: [1.330218567,17.07290468,7.387077163,8.56287875,2.358548364,14.90621636,7.424750916,9.611985879,6.514800847,2.511715329,9.075433356,5.075062341,9.199299757,5.613991818,1.5946684,4.789061252,6.205413858,9.63862829,30.55821471,1.887117547,10.16475883,7.747276831,9.940980235,7.879830064,4.37605313,42.86037538,19.37365993,5.660938803,4.942300828,4.723574287,19.29492038,7.355898277,16.3104711]
                      },{
                          name: '2013',
                          data: [1.25377617,16.09583317,7.368748145,8.689543091,2.505408788,14.7410813,7.557211045,9.384891603,6.862565032,2.414036933,8.681780123,5.062171964,9.39062342,5.866946294,1.588600104,4.99158936,5.732941879,9.780815065,27.88846601,1.752379938,10.31006279,7.531957408,11.45011884,7.946282506,4.344029312,36.38791752,18.00340041,5.084398353,4.671420785,4.972835876,18.55923617,7.145844359,16.32347679]
                      },{
                          name: '2014',
                          data: [1.290306776,15.38876602,6.86986793,8.328159898,2.612933521,15.15892722,7.543907641,9.165978376,5.935712482,2.232732005,8.660721243,4.573181595,8.889370395,6.059657407,1.727670507,4.89491703,5.270866786,9.538706103,25.84922928,1.750794556,9.920138075,7.686575825,9.270945132,7.517151585,4.331554028,43.85730795,19.44066648,5.033824487,4.478182178,4.311562994,22.93960631,6.49744049,16.50283724]
                      },
                  ];

              // Initiate the chart
              $('#container').highcharts({

                  chart: {
                      type: 'column'
                  },
                  title: {
                      text: 'CO2 emissions per Capita [1994 - 2014]'
                  },
                  subtitle: {
                      text: 'Metric tons per capita by year'
                  },
                  legend: {
                      layout: 'vertical',
                      align: 'left',
                      verticalAlign: 'top',
                      x: 50,
                      y: 50,
                      floating: true,
                      borderWidth: 1,
                      backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                  },
                  xAxis: {
                      categories: [
                          'Angola',
                          'Australia',
                          'Austria',
                          'Belgium',
                          'Brazil',
                          'Canada',
                          'China',
                          'Czech Republic',
                          'Denmark',
                          'Egypt',
                          'Finland',
                          'France',
                          'Germany',
                          'Iceland',
                          'India',
                          'Iraq',
                          'Italy',
                          'Japan',
                          'Kuwait',
                          'Morocco',
                          'Netherlands',
                          'New Zealand',
                          'Norway',
                          'Poland',
                          'Portugal',
                          'Qatar',
                          'Saudi Arabia',
                          'Spain',
                          'Sweden',
                          'Switzerland',
                          'United Arab Emirates',
                          'United Kingdom',
                          'United States'
                      ]
                  },
                  yAxis: {
                      title: {
                          text: 'Metric tons per capita'
                      }
                  },
                  tooltip: {
                      shared: true,
                      valueSuffix: ' Mt/per capita'
                  },
                  credits: {
                      enabled: false
                  },
                  plotOptions: {
                      areaspline: {
                          fillOpacity: 0.5
                      }
                  },
                  series: [{
                      name: 'CO2 ',
                      data: dataSequence[0].data.slice()
                  }/*, {
                      name: 'Average week',
                      data: [6, 8, 6, 7, 7, 7, 6]
                  }*/]
              });

              chart = $('#container').highcharts();

              /**
               * Update the chart. This happens either on updating (moving) the range input,
               * or from a timer when the timeline is playing.
               */
              function update(increment) {
                  var input = $('#play-range')[0],
                      output = $('#play-output')[0];

                  if (increment) {
                      input.value = parseInt(input.value) + increment;
                  }
                  chart.series[0].setData(dataSequence[input.value].data); // Increment dataset (updates chart)
                  output.innerHTML = dataSequence[input.value].name; // Output value
                  /*if (input.value >= input.max) { // Auto-pause
                      pause($('#play-pause-button')[0]);
                  }*/
              }

              /**
               * Play the timeline.
               */
              function play(button) {
                  button.title = 'pause';
                  button.className = 'fa fa-pause';
                  chart.sequenceTimer = setInterval ( function () {
                      update(1);
                  }, 1000);

              }

              /**
               * Pause the timeline, either when the range is ended, or when clicking the pause button.
               * Pausing stops the timer and resets the button to play mode.
               */
              function pause(button) {
                  button.title = 'play';
                  button.className = 'fa fa-play';
                  clearTimeout(chart.sequenceTimer);
                  chart.sequenceTimer = undefined;
              }

              /**
               * Toggle play and pause from the button
               */
              $('#play-pause-button').bind('click', function () {
                  if (chart.sequenceTimer === undefined) {
                      play(this);
                  } else {
                      pause(this);
                  }
              });

              /**
               * Update the chart when the input is changed
               */
              $('#play-range').bind('input', function () {
                  update();
              });
          });
      </script>
  </body>
</html>
